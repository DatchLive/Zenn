---
title: "M1 Macã§fish shellã®ç’°å¢ƒæ§‹ç¯‰ï¼ˆæ³¨æ„ç‚¹ãƒ»ã¤ã¾ã¥ã„ãŸç‚¹ç­‰ï¼‰"
emoji: "ğŸŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["shell","fish","M1"]
published: true
---
# ã¯ã˜ã‚ã«
å¹´æœ«å¹´å§‹ä¼‘æš‡ã®éš›ã«ã€ãšã£ã¨å‰ã‹ã‚‰ã‚„ã‚ŠãŸã„ã¨æ€ã£ã¦ã„ãŸã€Œfish shellã€ã®ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã„ã¾ã—ãŸã€‚
ãŠæ¥ãšã‹ã—ã„ã“ã¨ã«åˆæ­©çš„ãªã¨ã“ã‚ã§ã¤ã¾ã¥ã„ãŸã‚Šã€æ³¨æ„ã™ã¹ãç‚¹ãŒã‚ã£ãŸã®ã§ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚
:::message
ç§è‡ªèº«åˆå­¦è€…ãªã®ã§è¨˜è¿°å†…å®¹ãŒä¸é©åˆ‡ãªãƒˆã‚³ãƒ­ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ä¸å‚™ç­‰ã‚ã‚Šã¾ã—ãŸã‚‰ã€ã”æŒ‡æ‘˜é ‚ã‘ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚
:::

# ç’°å¢ƒ
- Apple Silicon(M1)
- macOS Monterey 12.0.1

# å°å…¥æ‰‹é †
### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
HomebrewçµŒç”±ã§fishã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
(å¾Œã«èª¬æ˜ã—ã¾ã™ãŒã€æœ€çµ‚çš„ã«ã¯HomebrewçµŒç”±ã§ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã›ã‚“ã€‚)
```terminal:terminal
$ brew install fish
```
### fish shellã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚·ã‚§ãƒ«ã«è¨­å®š
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸfishã®ãƒ‘ã‚¹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```terminal:terminal
$ which fish
/opt/homebrew/bin/fish
```
:::message
**æ³¨æ„ç‚¹**
M1ãƒãƒƒãƒ—Macã‹Intelãƒãƒƒãƒ—Macã§ãƒ‘ã‚¹ãŒç•°ãªã‚Šã¾ã™ã€‚
M1ï¼š/opt/homebrew/bin/fish
Intelï¼š/usr/local/bin/fish
:::
/etc/shellsã«ç¢ºèªã—ãŸfishã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚
```terminal:terminal
$ sudo vi /etc/shells
```
```terminal:terminal
# List of acceptable shells for chpass(1).
# Ftpd will not allow users to connect who are not using
# one of these shells.

/bin/bash
/bin/csh
/bin/dash
/bin/ksh
/bin/sh
/bin/tcsh
/bin/zsh
/opt/homebrew/bin/fish
```
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚·ã‚§ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
```terminal:terminal
$ chsh -s /opt/homebrew/bin/fish
```
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’å†èµ·å‹•ã™ã‚‹ã¨shellãŒfishã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚

# ğŸ‘†ã§ã‚„ã£ã¦ã¿ãŸã‘ã©...
ã„ãã¤ã‹ã®æŠ€è¡“è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸãŒã€ã»ã¼ä¸Šè¨˜æ‰‹é †é€šã‚Šã§å°å…¥ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ç§ã‚‚å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸãŒã€ç§ã®ç’°å¢ƒã§shellã‚’èµ·å‹•ã™ã‚‹ã¨ã€ã€ã€
```terminal:terminal
error: Unable to open universal variable file '/': Permission denied
error: Unable to open universal variable file '/': Permission denied
error: Unable to open universal variable file '/': Permission denied
```
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨ä¸Šè¨˜ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ãŒè¤‡æ•°è¡Œå‡ºã¦ã—ã¾ã†çµæœã«...ã€‚
å› ã¿ã«fishã¯æ™®é€šã«ä½¿ãˆã‚‹ã®ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹åº¦ã«ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼æ–‡ãŒ2è¡Œãã‚‰ã„å‡ºã¦ãã¦ã—ã¾ã†ã®ã§å‡ºåŠ›ãŒè¦‹ãˆè¾›ã„...ã€‚

è§£æ±ºç­–ã‚’æ¢ã—ã€ã„ãã¤ã‹ãƒ’ãƒƒãƒˆã—ãŸä¸­ã§ã€ç§ãŒè©¦ã—ã¦ä¸€å¿œè§£æ±ºã—ãŸæ‰‹é †ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚
[<E> fish: Unable to open universal variable file '...': Permission denied #3988](https://github.com/fish-shell/fish-shell/issues/3988)
[Fish Shell: "error: Unable to open universal variable file '/': Permission denied" [closed]](https://stackoverflow.com/questions/69328173/fish-shell-error-unable-to-open-universal-variable-file-permission-denie)

# ä¸€å¿œã®è§£æ±ºç­–
### å…¬å¼HPã®Installerã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ä¸€å¿œè§£æ±º
HomebrewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸfishã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€fishshellå…¬å¼HPã®Installerã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚Œãªããªã‚Šã¾ã—ãŸã€‚

### ä¸€åº¦fishã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ä»¥ä¸‹ã§Homebrewã‹ã‚‰fishã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```terminal:terminal
brew uninstall fish
```
.config/fishãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã€ã“ã¡ã‚‰ã‚‚å‰Šé™¤ã—ã¦ãŠãã¾ã™ã€‚
```terminal:terminal
cd ~
rm -rf .config/fish
```

### å†åº¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[fishshellå…¬å¼HP](https://fishshell.com/)ã®Installerã‹ã‚‰fishã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

### fish shellã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚·ã‚§ãƒ«ã«è¨­å®š
ãã—ã¦ã€å°å…¥æ‰‹é †ã¨åŒæ§˜ã«/etc/shellsã«ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```terminal:terminal
$ sudo vi /etc/shells

ãƒ»ãƒ»ãƒ»
ãƒ»ãƒ»ãƒ»
ãƒ»ãƒ»ãƒ»
/bin/zsh
/usr/local/bin/fish
```

å°å…¥æ‰‹é †ã¨åŒæ§˜ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚·ã‚§ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```terminal:terminal
$ chsh -s /usr/local/bin/fish
```

ã“ã‚Œã§ç§ã®ç’°å¢ƒã§ã¯ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã•ã‚Œãšã€é€šå¸¸é€šã‚Šfish shellãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

# ã•ã„ã”ã«
æ ¹æœ¬çš„ã«è§£æ±ºã•ã‚Œã¦ã¯ã„ã¾ã›ã‚“ãŒã€åŒã˜ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚ŒãŸæ–¹ã¯ä¸€åº¦è©¦ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚
ä½•ãŒæ‚ªã•ã—ã¦ã„ã‚‹ã®ã‹ã”å­˜çŸ¥ã®æ–¹ã¯æ˜¯éã‚³ãƒ¡ãƒ³ãƒˆã§ã”æ•™æˆé ‚ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚

# å¼•ç”¨
[ã€ç’°å¢ƒæ§‹ç¯‰ã€‘fishã®ç’°å¢ƒè¨­å®šæ‰‹é †](https://qiita.com/toda-axiaworks/items/7376aee0a47400a35190)

# å®£ä¼
è¶£å‘³ã§ YouTube ã«å‹•ç”»æŠ•ç¨¿ã‚’ã—ã¦ã„ã¾ã™ã€‚(ã‚¬ã‚¸ã‚§ãƒƒãƒˆç­‰ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚)
æ˜¯éãƒãƒ£ãƒ³ãƒãƒ«ç™»éŒ²å®œã—ããŠé¡˜ã„ã—ã¾ã™ï¼
https://www.youtube.com/user/datchlivetv